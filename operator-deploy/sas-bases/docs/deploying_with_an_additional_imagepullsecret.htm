<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <link rel="stylesheet" type="text/css" href="sas.css"/>
        <title>Deploying with an Additional ImagePullSecret</title>
    </head>
    <body>
        <h1 id="140228104288192deploying-with-an-additional-imagepullsecret">Deploying with an Additional ImagePullSecret</h1>
<h2 id="140228104288192overview">Overview</h2>
<p>This overlay is used to apply an additional imagePullSecret. This overlay is
required for SAS Viya platform deployments on Red Hat OpenShift version 4.16
and later that use the OpenShift Container Registry as a mirror for their
deployment assets.</p>
<h2 id="140228104288192installation">Installation</h2>
<p>Use these steps to apply the desired property to your SAS Viya platform deployment.</p>
<ol>
<li>
<p>Create the <code>$deploy/site-config/add-imagepullsecret</code> directory and copy
   <code>$deploy/sas-bases/examples/add-imagepullsecret/configuration.env</code> into it.</p>
</li>
<li>
<p>Define the property in the configuration.env file. To define the property, update
   its token value as described in the comments in the file.</p>
</li>
<li>
<p>Add the following path to the resources block of the base kustomization.yaml file (<code>$deploy/kustomization.yaml</code>):</p>
<pre class="highlight"><code class="language-yaml">...
resources:
...
- sas-bases/overlays/add-imagepullsecret/resources
...</code></pre>

</li>
<li>
<p>Add the following entry to the configMapGenerator block of the base kustomization.yaml file:</p>
<pre class="highlight"><code class="language-yaml">...
configMapGenerator:
...
- behavior: merge
  name: add-imagepullsecret-configuration
  envs:
    - site-config/add-imagepullsecret/configuration.env
...</code></pre>

</li>
<li>
<p>Add the following entry to the transformers block of the base kustomization.yaml file:</p>
<pre class="highlight"><code class="language-yaml">...
transformers:
...
- sas-bases/overlays/add-imagepullsecret/transformers.yaml
...</code></pre>

</li>
</ol>
    </body>
</html>