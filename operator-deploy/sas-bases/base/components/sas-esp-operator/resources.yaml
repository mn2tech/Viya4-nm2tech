
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.16.5
  name: espconfigs.iot.sas.com
spec:
  conversion:
    strategy: None
  group: iot.sas.com
  names:
    kind: ESPConfig
    listKind: ESPConfigList
    plural: espconfigs
    singular: espconfig
  scope: Namespaced
  versions:
  - name: v1
    schema:
      openAPIV3Schema:
        description: ESPConfig is the Kubernetes API schema for a ESP configuration.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: ESPConfigSpec is the desired state of a ESP configuration.
            properties:
              espProperties:
                additionalProperties:
                  type: string
                description: EspProperties provides ESP Server configuration.
                type: object
              limits:
                additionalProperties:
                  type: string
                type: object
              loadBalancerTemplate:
                description: ESPLoadBalancerTemplate defines an ESP server load balancer
                  template.
                properties:
                  deployment:
                    description: |-
                      Deployment is a ESP template that represents a Kubernetes Deployment.
                      Placeholders in fields are replaced with values before the Kubernetes Deployment is created.
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                type: object
              operatorProperties:
                additionalProperties:
                  type: string
                description: OperatorProperties provides ESP Operator configuration.
                type: object
              projectTemplate:
                description: ESPProjectTemplate defines an ESP server project template.
                properties:
                  autoscale:
                    description: ESPautoscaler defines ESP server Kubernetes pod autoscaling
                      configuration.
                    properties:
                      maxReplicas:
                        format: int32
                        type: integer
                      metrics:
                        items:
                          description: |-
                            MetricSpec specifies how to scale based on a single metric
                            (only `type` and one other matching field should be set at once).
                          properties:
                            containerResource:
                              description: |-
                                containerResource refers to a resource metric (such as those specified in
                                requests and limits) known to Kubernetes describing a single container in
                                each pod of the current scale target (e.g. CPU or memory). Such metrics are
                                built in to Kubernetes, and have special scaling options on top of those
                                available to normal per-pod metrics using the "pods" source.
                              properties:
                                container:
                                  description: container is the name of the container
                                    in the pods of the scaling target
                                  type: string
                                name:
                                  description: name is the name of the resource in
                                    question.
                                  type: string
                                target:
                                  description: target specifies the target value for
                                    the given metric
                                  properties:
                                    averageUtilization:
                                      description: |-
                                        averageUtilization is the target value of the average of the
                                        resource metric across all relevant pods, represented as a percentage of
                                        the requested value of the resource for the pods.
                                        Currently only valid for Resource metric source type
                                      format: int32
                                      type: integer
                                    averageValue:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: |-
                                        averageValue is the target value of the average of the
                                        metric across all relevant pods (as a quantity)
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                    type:
                                      description: type represents whether the metric
                                        type is Utilization, Value, or AverageValue
                                      type: string
                                    value:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: value is the target value of the
                                        metric (as a quantity).
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                  required:
                                  - type
                                  type: object
                              required:
                              - container
                              - name
                              - target
                              type: object
                            external:
                              description: |-
                                external refers to a global metric that is not associated
                                with any Kubernetes object. It allows autoscaling based on information
                                coming from components running outside of cluster
                                (for example length of queue in cloud messaging service, or
                                QPS from loadbalancer running outside of cluster).
                              properties:
                                metric:
                                  description: metric identifies the target metric
                                    by name and selector
                                  properties:
                                    name:
                                      description: name is the name of the given metric
                                      type: string
                                    selector:
                                      description: |-
                                        selector is the string-encoded form of a standard kubernetes label selector for the given metric
                                        When set, it is passed as an additional parameter to the metrics server for more specific metrics scoping.
                                        When unset, just the metricName will be used to gather metrics.
                                      properties:
                                        matchExpressions:
                                          description: matchExpressions is a list
                                            of label selector requirements. The requirements
                                            are ANDed.
                                          items:
                                            description: |-
                                              A label selector requirement is a selector that contains values, a key, and an operator that
                                              relates the key and values.
                                            properties:
                                              key:
                                                description: key is the label key
                                                  that the selector applies to.
                                                type: string
                                              operator:
                                                description: |-
                                                  operator represents a key's relationship to a set of values.
                                                  Valid operators are In, NotIn, Exists and DoesNotExist.
                                                type: string
                                              values:
                                                description: |-
                                                  values is an array of string values. If the operator is In or NotIn,
                                                  the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                  the values array must be empty. This array is replaced during a strategic
                                                  merge patch.
                                                items:
                                                  type: string
                                                type: array
                                                x-kubernetes-list-type: atomic
                                            required:
                                            - key
                                            - operator
                                            type: object
                                          type: array
                                          x-kubernetes-list-type: atomic
                                        matchLabels:
                                          additionalProperties:
                                            type: string
                                          description: |-
                                            matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                            map is equivalent to an element of matchExpressions, whose key field is "key", the
                                            operator is "In", and the values array contains only "value". The requirements are ANDed.
                                          type: object
                                      type: object
                                      x-kubernetes-map-type: atomic
                                  required:
                                  - name
                                  type: object
                                target:
                                  description: target specifies the target value for
                                    the given metric
                                  properties:
                                    averageUtilization:
                                      description: |-
                                        averageUtilization is the target value of the average of the
                                        resource metric across all relevant pods, represented as a percentage of
                                        the requested value of the resource for the pods.
                                        Currently only valid for Resource metric source type
                                      format: int32
                                      type: integer
                                    averageValue:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: |-
                                        averageValue is the target value of the average of the
                                        metric across all relevant pods (as a quantity)
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                    type:
                                      description: type represents whether the metric
                                        type is Utilization, Value, or AverageValue
                                      type: string
                                    value:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: value is the target value of the
                                        metric (as a quantity).
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                  required:
                                  - type
                                  type: object
                              required:
                              - metric
                              - target
                              type: object
                            object:
                              description: |-
                                object refers to a metric describing a single kubernetes object
                                (for example, hits-per-second on an Ingress object).
                              properties:
                                describedObject:
                                  description: describedObject specifies the descriptions
                                    of a object,such as kind,name apiVersion
                                  properties:
                                    apiVersion:
                                      description: apiVersion is the API version of
                                        the referent
                                      type: string
                                    kind:
                                      description: 'kind is the kind of the referent;
                                        More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
                                      type: string
                                    name:
                                      description: 'name is the name of the referent;
                                        More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                      type: string
                                  required:
                                  - kind
                                  - name
                                  type: object
                                metric:
                                  description: metric identifies the target metric
                                    by name and selector
                                  properties:
                                    name:
                                      description: name is the name of the given metric
                                      type: string
                                    selector:
                                      description: |-
                                        selector is the string-encoded form of a standard kubernetes label selector for the given metric
                                        When set, it is passed as an additional parameter to the metrics server for more specific metrics scoping.
                                        When unset, just the metricName will be used to gather metrics.
                                      properties:
                                        matchExpressions:
                                          description: matchExpressions is a list
                                            of label selector requirements. The requirements
                                            are ANDed.
                                          items:
                                            description: |-
                                              A label selector requirement is a selector that contains values, a key, and an operator that
                                              relates the key and values.
                                            properties:
                                              key:
                                                description: key is the label key
                                                  that the selector applies to.
                                                type: string
                                              operator:
                                                description: |-
                                                  operator represents a key's relationship to a set of values.
                                                  Valid operators are In, NotIn, Exists and DoesNotExist.
                                                type: string
                                              values:
                                                description: |-
                                                  values is an array of string values. If the operator is In or NotIn,
                                                  the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                  the values array must be empty. This array is replaced during a strategic
                                                  merge patch.
                                                items:
                                                  type: string
                                                type: array
                                                x-kubernetes-list-type: atomic
                                            required:
                                            - key
                                            - operator
                                            type: object
                                          type: array
                                          x-kubernetes-list-type: atomic
                                        matchLabels:
                                          additionalProperties:
                                            type: string
                                          description: |-
                                            matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                            map is equivalent to an element of matchExpressions, whose key field is "key", the
                                            operator is "In", and the values array contains only "value". The requirements are ANDed.
                                          type: object
                                      type: object
                                      x-kubernetes-map-type: atomic
                                  required:
                                  - name
                                  type: object
                                target:
                                  description: target specifies the target value for
                                    the given metric
                                  properties:
                                    averageUtilization:
                                      description: |-
                                        averageUtilization is the target value of the average of the
                                        resource metric across all relevant pods, represented as a percentage of
                                        the requested value of the resource for the pods.
                                        Currently only valid for Resource metric source type
                                      format: int32
                                      type: integer
                                    averageValue:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: |-
                                        averageValue is the target value of the average of the
                                        metric across all relevant pods (as a quantity)
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                    type:
                                      description: type represents whether the metric
                                        type is Utilization, Value, or AverageValue
                                      type: string
                                    value:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: value is the target value of the
                                        metric (as a quantity).
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                  required:
                                  - type
                                  type: object
                              required:
                              - describedObject
                              - metric
                              - target
                              type: object
                            pods:
                              description: |-
                                pods refers to a metric describing each pod in the current scale target
                                (for example, transactions-processed-per-second).  The values will be
                                averaged together before being compared to the target value.
                              properties:
                                metric:
                                  description: metric identifies the target metric
                                    by name and selector
                                  properties:
                                    name:
                                      description: name is the name of the given metric
                                      type: string
                                    selector:
                                      description: |-
                                        selector is the string-encoded form of a standard kubernetes label selector for the given metric
                                        When set, it is passed as an additional parameter to the metrics server for more specific metrics scoping.
                                        When unset, just the metricName will be used to gather metrics.
                                      properties:
                                        matchExpressions:
                                          description: matchExpressions is a list
                                            of label selector requirements. The requirements
                                            are ANDed.
                                          items:
                                            description: |-
                                              A label selector requirement is a selector that contains values, a key, and an operator that
                                              relates the key and values.
                                            properties:
                                              key:
                                                description: key is the label key
                                                  that the selector applies to.
                                                type: string
                                              operator:
                                                description: |-
                                                  operator represents a key's relationship to a set of values.
                                                  Valid operators are In, NotIn, Exists and DoesNotExist.
                                                type: string
                                              values:
                                                description: |-
                                                  values is an array of string values. If the operator is In or NotIn,
                                                  the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                  the values array must be empty. This array is replaced during a strategic
                                                  merge patch.
                                                items:
                                                  type: string
                                                type: array
                                                x-kubernetes-list-type: atomic
                                            required:
                                            - key
                                            - operator
                                            type: object
                                          type: array
                                          x-kubernetes-list-type: atomic
                                        matchLabels:
                                          additionalProperties:
                                            type: string
                                          description: |-
                                            matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                            map is equivalent to an element of matchExpressions, whose key field is "key", the
                                            operator is "In", and the values array contains only "value". The requirements are ANDed.
                                          type: object
                                      type: object
                                      x-kubernetes-map-type: atomic
                                  required:
                                  - name
                                  type: object
                                target:
                                  description: target specifies the target value for
                                    the given metric
                                  properties:
                                    averageUtilization:
                                      description: |-
                                        averageUtilization is the target value of the average of the
                                        resource metric across all relevant pods, represented as a percentage of
                                        the requested value of the resource for the pods.
                                        Currently only valid for Resource metric source type
                                      format: int32
                                      type: integer
                                    averageValue:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: |-
                                        averageValue is the target value of the average of the
                                        metric across all relevant pods (as a quantity)
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                    type:
                                      description: type represents whether the metric
                                        type is Utilization, Value, or AverageValue
                                      type: string
                                    value:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: value is the target value of the
                                        metric (as a quantity).
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                  required:
                                  - type
                                  type: object
                              required:
                              - metric
                              - target
                              type: object
                            resource:
                              description: |-
                                resource refers to a resource metric (such as those specified in
                                requests and limits) known to Kubernetes describing each pod in the
                                current scale target (e.g. CPU or memory). Such metrics are built in to
                                Kubernetes, and have special scaling options on top of those available
                                to normal per-pod metrics using the "pods" source.
                              properties:
                                name:
                                  description: name is the name of the resource in
                                    question.
                                  type: string
                                target:
                                  description: target specifies the target value for
                                    the given metric
                                  properties:
                                    averageUtilization:
                                      description: |-
                                        averageUtilization is the target value of the average of the
                                        resource metric across all relevant pods, represented as a percentage of
                                        the requested value of the resource for the pods.
                                        Currently only valid for Resource metric source type
                                      format: int32
                                      type: integer
                                    averageValue:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: |-
                                        averageValue is the target value of the average of the
                                        metric across all relevant pods (as a quantity)
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                    type:
                                      description: type represents whether the metric
                                        type is Utilization, Value, or AverageValue
                                      type: string
                                    value:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: value is the target value of the
                                        metric (as a quantity).
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                  required:
                                  - type
                                  type: object
                              required:
                              - name
                              - target
                              type: object
                            type:
                              description: |-
                                type is the type of metric source.  It should be one of "ContainerResource", "External",
                                "Object", "Pods" or "Resource", each mapping to a matching field in the object.
                              type: string
                          required:
                          - type
                          type: object
                        type: array
                      minReplicas:
                        format: int32
                        type: integer
                    required:
                    - maxReplicas
                    - metrics
                    - minReplicas
                    type: object
                  deployment:
                    description: |-
                      Deployment is a ESP template that represents a Kubernetes Deployment.
                      Placeholders in fields are replaced with values before the Kubernetes Deployment is created.
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  httpProxy:
                    description: |-
                      Proxy is a ESP template that represents a Kubernetes Contour HTTPProxy.
                      Placeholders in fields are replaced with values before the Kubernetes Contour HTTPProxy is created.
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  httpService:
                    description: |-
                      HTTPService is a ESP template that represents a Kubernetes Service.
                      Placeholders in fields are replaced with values before the Kubernetes Service is created.
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  ingress:
                    description: |-
                      Ingress is a ESP template that represents a Kubernetes Ingress.
                      Placeholders in fields are replaced with values before the Kubernetes Ingress is created.
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  pubsubService:
                    description: |-
                      PubsubService is a ESP template that represents a Kubernetes Service.
                      Placeholders in fields are replaced with values before the Kubernetes Service is created.
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  route:
                    description: |-
                      Route is a ESP template that represents a Kubernetes OpenShift Route.
                      Placeholders in fields are replaced with values before the Kubernetes OpenShift Route is created.
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                type: object
              routerTemplate:
                description: ESPRouterTemplate defines an ESP server router template.
                properties:
                  deployment:
                    description: |-
                      Deployment is a ESP template that represents a Kubernetes Deployment.
                      Placeholders in fields are replaced with values before the Kubernetes Deployment is created.
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                type: object
            required:
            - espProperties
            - operatorProperties
            type: object
          status:
            description: ESPConfigStatus is the observed state of a ESP configuration.
            properties:
              conditions:
                description: Conditions is a list of conditional states of the ESP
                  configuration.
                items:
                  description: ESPConfigCondition provides details for the current
                    condition of a ESP configuration.
                  properties:
                    lastTransitionTime:
                      description: TransitionTime is the time the ESP configuration
                        condition transitioned from another condition to this condition.
                      format: date-time
                      type: string
                    message:
                      description: Message is a human-readable message providing details
                        about the condition transition.
                      type: string
                    reason:
                      description: Reason is a short camel-cased reason about why
                        the ESP configuration transitioned from another condition
                        to this condition.
                      type: string
                    status:
                      description: |-
                        Status is the status of the condition.
                        Valid values are: True, False, Unknown.
                      type: string
                    type:
                      description: Type is the type of the condition.
                      type: string
                  required:
                  - status
                  - type
                  type: object
                type: array
              message:
                description: Message is a human-readable message providing details
                  about why the ESP configuration is in the current state.
                type: string
              phase:
                description: |-
                  Phase is the current lifecycle phase.
                  Valid values are:
                  Accepted (the ESP configuration is valid and will be used by the ESP Kubernetes operator),
                  Failed (the ESP configuration is invalid and will not be used by the ESP Kubernetes operator).
                type: string
              reason:
                description: Reason is a short camel-cased reason about why the ESP
                  configuration is in the current state.
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: ESPConfig is the Kubernetes API schema for a ESP configuration.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: ESPConfigSpec is the desired state of a ESP configuration.
            properties:
              espProperties:
                additionalProperties:
                  type: string
                description: EspProperties provides ESP Server configuration.
                type: object
              limits:
                additionalProperties:
                  type: string
                type: object
              loadBalancerTemplate:
                description: ESPLoadBalancerTemplate defines an ESP server load balancer
                  template.
                properties:
                  deployment:
                    description: |-
                      Deployment is a ESP template that represents a Kubernetes Deployment.
                      Placeholders in fields are replaced with values before the Kubernetes Deployment is created.
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                type: object
              operatorProperties:
                additionalProperties:
                  type: string
                description: OperatorProperties provides ESP Operator configuration.
                type: object
              projectTemplate:
                description: ESPProjectTemplate defines an ESP server project template.
                properties:
                  autoscale:
                    description: ESPautoscaler defines ESP server Kubernetes pod autoscaling
                      configuration.
                    properties:
                      maxReplicas:
                        format: int32
                        type: integer
                      metrics:
                        items:
                          description: |-
                            MetricSpec specifies how to scale based on a single metric
                            (only `type` and one other matching field should be set at once).
                          properties:
                            containerResource:
                              description: |-
                                containerResource refers to a resource metric (such as those specified in
                                requests and limits) known to Kubernetes describing a single container in
                                each pod of the current scale target (e.g. CPU or memory). Such metrics are
                                built in to Kubernetes, and have special scaling options on top of those
                                available to normal per-pod metrics using the "pods" source.
                              properties:
                                container:
                                  description: container is the name of the container
                                    in the pods of the scaling target
                                  type: string
                                name:
                                  description: name is the name of the resource in
                                    question.
                                  type: string
                                target:
                                  description: target specifies the target value for
                                    the given metric
                                  properties:
                                    averageUtilization:
                                      description: |-
                                        averageUtilization is the target value of the average of the
                                        resource metric across all relevant pods, represented as a percentage of
                                        the requested value of the resource for the pods.
                                        Currently only valid for Resource metric source type
                                      format: int32
                                      type: integer
                                    averageValue:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: |-
                                        averageValue is the target value of the average of the
                                        metric across all relevant pods (as a quantity)
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                    type:
                                      description: type represents whether the metric
                                        type is Utilization, Value, or AverageValue
                                      type: string
                                    value:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: value is the target value of the
                                        metric (as a quantity).
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                  required:
                                  - type
                                  type: object
                              required:
                              - container
                              - name
                              - target
                              type: object
                            external:
                              description: |-
                                external refers to a global metric that is not associated
                                with any Kubernetes object. It allows autoscaling based on information
                                coming from components running outside of cluster
                                (for example length of queue in cloud messaging service, or
                                QPS from loadbalancer running outside of cluster).
                              properties:
                                metric:
                                  description: metric identifies the target metric
                                    by name and selector
                                  properties:
                                    name:
                                      description: name is the name of the given metric
                                      type: string
                                    selector:
                                      description: |-
                                        selector is the string-encoded form of a standard kubernetes label selector for the given metric
                                        When set, it is passed as an additional parameter to the metrics server for more specific metrics scoping.
                                        When unset, just the metricName will be used to gather metrics.
                                      properties:
                                        matchExpressions:
                                          description: matchExpressions is a list
                                            of label selector requirements. The requirements
                                            are ANDed.
                                          items:
                                            description: |-
                                              A label selector requirement is a selector that contains values, a key, and an operator that
                                              relates the key and values.
                                            properties:
                                              key:
                                                description: key is the label key
                                                  that the selector applies to.
                                                type: string
                                              operator:
                                                description: |-
                                                  operator represents a key's relationship to a set of values.
                                                  Valid operators are In, NotIn, Exists and DoesNotExist.
                                                type: string
                                              values:
                                                description: |-
                                                  values is an array of string values. If the operator is In or NotIn,
                                                  the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                  the values array must be empty. This array is replaced during a strategic
                                                  merge patch.
                                                items:
                                                  type: string
                                                type: array
                                                x-kubernetes-list-type: atomic
                                            required:
                                            - key
                                            - operator
                                            type: object
                                          type: array
                                          x-kubernetes-list-type: atomic
                                        matchLabels:
                                          additionalProperties:
                                            type: string
                                          description: |-
                                            matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                            map is equivalent to an element of matchExpressions, whose key field is "key", the
                                            operator is "In", and the values array contains only "value". The requirements are ANDed.
                                          type: object
                                      type: object
                                      x-kubernetes-map-type: atomic
                                  required:
                                  - name
                                  type: object
                                target:
                                  description: target specifies the target value for
                                    the given metric
                                  properties:
                                    averageUtilization:
                                      description: |-
                                        averageUtilization is the target value of the average of the
                                        resource metric across all relevant pods, represented as a percentage of
                                        the requested value of the resource for the pods.
                                        Currently only valid for Resource metric source type
                                      format: int32
                                      type: integer
                                    averageValue:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: |-
                                        averageValue is the target value of the average of the
                                        metric across all relevant pods (as a quantity)
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                    type:
                                      description: type represents whether the metric
                                        type is Utilization, Value, or AverageValue
                                      type: string
                                    value:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: value is the target value of the
                                        metric (as a quantity).
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                  required:
                                  - type
                                  type: object
                              required:
                              - metric
                              - target
                              type: object
                            object:
                              description: |-
                                object refers to a metric describing a single kubernetes object
                                (for example, hits-per-second on an Ingress object).
                              properties:
                                describedObject:
                                  description: describedObject specifies the descriptions
                                    of a object,such as kind,name apiVersion
                                  properties:
                                    apiVersion:
                                      description: apiVersion is the API version of
                                        the referent
                                      type: string
                                    kind:
                                      description: 'kind is the kind of the referent;
                                        More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
                                      type: string
                                    name:
                                      description: 'name is the name of the referent;
                                        More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                      type: string
                                  required:
                                  - kind
                                  - name
                                  type: object
                                metric:
                                  description: metric identifies the target metric
                                    by name and selector
                                  properties:
                                    name:
                                      description: name is the name of the given metric
                                      type: string
                                    selector:
                                      description: |-
                                        selector is the string-encoded form of a standard kubernetes label selector for the given metric
                                        When set, it is passed as an additional parameter to the metrics server for more specific metrics scoping.
                                        When unset, just the metricName will be used to gather metrics.
                                      properties:
                                        matchExpressions:
                                          description: matchExpressions is a list
                                            of label selector requirements. The requirements
                                            are ANDed.
                                          items:
                                            description: |-
                                              A label selector requirement is a selector that contains values, a key, and an operator that
                                              relates the key and values.
                                            properties:
                                              key:
                                                description: key is the label key
                                                  that the selector applies to.
                                                type: string
                                              operator:
                                                description: |-
                                                  operator represents a key's relationship to a set of values.
                                                  Valid operators are In, NotIn, Exists and DoesNotExist.
                                                type: string
                                              values:
                                                description: |-
                                                  values is an array of string values. If the operator is In or NotIn,
                                                  the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                  the values array must be empty. This array is replaced during a strategic
                                                  merge patch.
                                                items:
                                                  type: string
                                                type: array
                                                x-kubernetes-list-type: atomic
                                            required:
                                            - key
                                            - operator
                                            type: object
                                          type: array
                                          x-kubernetes-list-type: atomic
                                        matchLabels:
                                          additionalProperties:
                                            type: string
                                          description: |-
                                            matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                            map is equivalent to an element of matchExpressions, whose key field is "key", the
                                            operator is "In", and the values array contains only "value". The requirements are ANDed.
                                          type: object
                                      type: object
                                      x-kubernetes-map-type: atomic
                                  required:
                                  - name
                                  type: object
                                target:
                                  description: target specifies the target value for
                                    the given metric
                                  properties:
                                    averageUtilization:
                                      description: |-
                                        averageUtilization is the target value of the average of the
                                        resource metric across all relevant pods, represented as a percentage of
                                        the requested value of the resource for the pods.
                                        Currently only valid for Resource metric source type
                                      format: int32
                                      type: integer
                                    averageValue:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: |-
                                        averageValue is the target value of the average of the
                                        metric across all relevant pods (as a quantity)
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                    type:
                                      description: type represents whether the metric
                                        type is Utilization, Value, or AverageValue
                                      type: string
                                    value:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: value is the target value of the
                                        metric (as a quantity).
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                  required:
                                  - type
                                  type: object
                              required:
                              - describedObject
                              - metric
                              - target
                              type: object
                            pods:
                              description: |-
                                pods refers to a metric describing each pod in the current scale target
                                (for example, transactions-processed-per-second).  The values will be
                                averaged together before being compared to the target value.
                              properties:
                                metric:
                                  description: metric identifies the target metric
                                    by name and selector
                                  properties:
                                    name:
                                      description: name is the name of the given metric
                                      type: string
                                    selector:
                                      description: |-
                                        selector is the string-encoded form of a standard kubernetes label selector for the given metric
                                        When set, it is passed as an additional parameter to the metrics server for more specific metrics scoping.
                                        When unset, just the metricName will be used to gather metrics.
                                      properties:
                                        matchExpressions:
                                          description: matchExpressions is a list
                                            of label selector requirements. The requirements
                                            are ANDed.
                                          items:
                                            description: |-
                                              A label selector requirement is a selector that contains values, a key, and an operator that
                                              relates the key and values.
                                            properties:
                                              key:
                                                description: key is the label key
                                                  that the selector applies to.
                                                type: string
                                              operator:
                                                description: |-
                                                  operator represents a key's relationship to a set of values.
                                                  Valid operators are In, NotIn, Exists and DoesNotExist.
                                                type: string
                                              values:
                                                description: |-
                                                  values is an array of string values. If the operator is In or NotIn,
                                                  the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                  the values array must be empty. This array is replaced during a strategic
                                                  merge patch.
                                                items:
                                                  type: string
                                                type: array
                                                x-kubernetes-list-type: atomic
                                            required:
                                            - key
                                            - operator
                                            type: object
                                          type: array
                                          x-kubernetes-list-type: atomic
                                        matchLabels:
                                          additionalProperties:
                                            type: string
                                          description: |-
                                            matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                            map is equivalent to an element of matchExpressions, whose key field is "key", the
                                            operator is "In", and the values array contains only "value". The requirements are ANDed.
                                          type: object
                                      type: object
                                      x-kubernetes-map-type: atomic
                                  required:
                                  - name
                                  type: object
                                target:
                                  description: target specifies the target value for
                                    the given metric
                                  properties:
                                    averageUtilization:
                                      description: |-
                                        averageUtilization is the target value of the average of the
                                        resource metric across all relevant pods, represented as a percentage of
                                        the requested value of the resource for the pods.
                                        Currently only valid for Resource metric source type
                                      format: int32
                                      type: integer
                                    averageValue:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: |-
                                        averageValue is the target value of the average of the
                                        metric across all relevant pods (as a quantity)
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                    type:
                                      description: type represents whether the metric
                                        type is Utilization, Value, or AverageValue
                                      type: string
                                    value:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: value is the target value of the
                                        metric (as a quantity).
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                  required:
                                  - type
                                  type: object
                              required:
                              - metric
                              - target
                              type: object
                            resource:
                              description: |-
                                resource refers to a resource metric (such as those specified in
                                requests and limits) known to Kubernetes describing each pod in the
                                current scale target (e.g. CPU or memory). Such metrics are built in to
                                Kubernetes, and have special scaling options on top of those available
                                to normal per-pod metrics using the "pods" source.
                              properties:
                                name:
                                  description: name is the name of the resource in
                                    question.
                                  type: string
                                target:
                                  description: target specifies the target value for
                                    the given metric
                                  properties:
                                    averageUtilization:
                                      description: |-
                                        averageUtilization is the target value of the average of the
                                        resource metric across all relevant pods, represented as a percentage of
                                        the requested value of the resource for the pods.
                                        Currently only valid for Resource metric source type
                                      format: int32
                                      type: integer
                                    averageValue:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: |-
                                        averageValue is the target value of the average of the
                                        metric across all relevant pods (as a quantity)
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                    type:
                                      description: type represents whether the metric
                                        type is Utilization, Value, or AverageValue
                                      type: string
                                    value:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: value is the target value of the
                                        metric (as a quantity).
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                  required:
                                  - type
                                  type: object
                              required:
                              - name
                              - target
                              type: object
                            type:
                              description: |-
                                type is the type of metric source.  It should be one of "ContainerResource", "External",
                                "Object", "Pods" or "Resource", each mapping to a matching field in the object.
                              type: string
                          required:
                          - type
                          type: object
                        type: array
                      minReplicas:
                        format: int32
                        type: integer
                    required:
                    - maxReplicas
                    - metrics
                    - minReplicas
                    type: object
                  deployment:
                    description: |-
                      Deployment is a ESP template that represents a Kubernetes Deployment.
                      Placeholders in fields are replaced with values before the Kubernetes Deployment is created.
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  httpProxy:
                    description: |-
                      Proxy is a ESP template that represents a Kubernetes Contour HTTPProxy.
                      Placeholders in fields are replaced with values before the Kubernetes Contour HTTPProxy is created.
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  httpService:
                    description: |-
                      HTTPService is a ESP template that represents a Kubernetes Service.
                      Placeholders in fields are replaced with values before the Kubernetes Service is created.
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  ingress:
                    description: |-
                      Ingress is a ESP template that represents a Kubernetes Ingress.
                      Placeholders in fields are replaced with values before the Kubernetes Ingress is created.
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  pubsubService:
                    description: |-
                      PubsubService is a ESP template that represents a Kubernetes Service.
                      Placeholders in fields are replaced with values before the Kubernetes Service is created.
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  route:
                    description: |-
                      Route is a ESP template that represents a Kubernetes OpenShift Route.
                      Placeholders in fields are replaced with values before the Kubernetes OpenShift Route is created.
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                type: object
              routerTemplate:
                description: ESPRouterTemplate defines an ESP server router template.
                properties:
                  deployment:
                    description: |-
                      Deployment is a ESP template that represents a Kubernetes Deployment.
                      Placeholders in fields are replaced with values before the Kubernetes Deployment is created.
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                type: object
            required:
            - espProperties
            - operatorProperties
            type: object
          status:
            description: ESPConfigStatus is the observed state of a ESP configuration.
            properties:
              conditions:
                description: Conditions is a list of conditional states of the ESP
                  configuration.
                items:
                  description: ESPConfigCondition provides details for the current
                    condition of a ESP configuration.
                  properties:
                    lastTransitionTime:
                      description: TransitionTime is the time the ESP configuration
                        condition transitioned from another condition to this condition.
                      format: date-time
                      type: string
                    message:
                      description: Message is a human-readable message providing details
                        about the condition transition.
                      type: string
                    reason:
                      description: Reason is a short camel-cased reason about why
                        the ESP configuration transitioned from another condition
                        to this condition.
                      type: string
                    status:
                      description: |-
                        Status is the status of the condition.
                        Valid values are: True, False, Unknown.
                      type: string
                    type:
                      description: Type is the type of the condition.
                      type: string
                  required:
                  - status
                  - type
                  type: object
                type: array
              message:
                description: Message is a human-readable message providing details
                  about why the ESP configuration is in the current state.
                type: string
              phase:
                description: |-
                  Phase is the current lifecycle phase.
                  Valid values are:
                  Accepted (the ESP configuration is valid and will be used by the ESP Kubernetes operator),
                  Failed (the ESP configuration is invalid and will not be used by the ESP Kubernetes operator).
                type: string
              reason:
                description: Reason is a short camel-cased reason about why the ESP
                  configuration is in the current state.
                type: string
            type: object
        type: object
    served: true
    storage: false
    subresources:
      status: {}

---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.16.5
  name: esploadbalancers.iot.sas.com
spec:
  conversion:
    strategy: None
  group: iot.sas.com
  names:
    kind: ESPLoadBalancer
    listKind: ESPLoadBalancerList
    plural: esploadbalancers
    singular: esploadbalancer
  scope: Namespaced
  versions:
  - name: v1
    schema:
      openAPIV3Schema:
        description: ESPLoadBalancer defines the ESP load balancer.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: ESPLoadBalancerSpec defines the ESP load balancer desired
              state.
            properties:
              httpPort:
                format: int32
                type: integer
              targets:
                items:
                  description: ESPLoadBlancerTarget defines the ESP load balancer
                    stream targets.
                  properties:
                    connectors:
                      items:
                        description: ESPConnector defines the ESP load balancer stream
                          sources.
                        properties:
                          class:
                            type: string
                          properties:
                            additionalProperties:
                              type: string
                            type: object
                          type:
                            type: string
                        required:
                        - class
                        - properties
                        - type
                        type: object
                      type: array
                    hashFields:
                      items:
                        type: string
                      type: array
                    projectName:
                      type: string
                    queryName:
                      type: string
                    routingPolicy:
                      type: string
                    schema:
                      description: ESPSchema defines the ESP stream window.
                      properties:
                        fields:
                          items:
                            description: ESPField defines the ESP stream window fields.
                            properties:
                              key:
                                type: string
                              name:
                                type: string
                              type:
                                type: string
                            required:
                            - name
                            - type
                            type: object
                          type: array
                      type: object
                    schemaString:
                      type: string
                    type:
                      type: string
                    windowName:
                      type: string
                  required:
                  - projectName
                  - queryName
                  - routingPolicy
                  - type
                  - windowName
                  type: object
                type: array
            required:
            - httpPort
            - targets
            type: object
          status:
            description: ESPLoadBalancerStatus defines the ESP load balancer observed
              state.
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: ESPLoadBalancer defines the ESP load balancer.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: ESPLoadBalancerSpec defines the ESP load balancer desired
              state.
            properties:
              httpPort:
                format: int32
                type: integer
              targets:
                items:
                  description: ESPLoadBlancerTarget defines the ESP load balancer
                    stream targets.
                  properties:
                    connectors:
                      items:
                        description: ESPConnector defines the ESP load balancer stream
                          sources.
                        properties:
                          class:
                            type: string
                          properties:
                            additionalProperties:
                              type: string
                            type: object
                          type:
                            type: string
                        required:
                        - class
                        - properties
                        - type
                        type: object
                      type: array
                    hashFields:
                      items:
                        type: string
                      type: array
                    projectName:
                      type: string
                    queryName:
                      type: string
                    routingPolicy:
                      type: string
                    schema:
                      description: ESPSchema defines the ESP stream window.
                      properties:
                        fields:
                          items:
                            description: ESPField defines the ESP stream window fields.
                            properties:
                              key:
                                type: string
                              name:
                                type: string
                              type:
                                type: string
                            required:
                            - name
                            - type
                            type: object
                          type: array
                      type: object
                    schemaString:
                      type: string
                    type:
                      type: string
                    windowName:
                      type: string
                  required:
                  - projectName
                  - queryName
                  - routingPolicy
                  - type
                  - windowName
                  type: object
                type: array
            required:
            - httpPort
            - targets
            type: object
          status:
            description: ESPLoadBalancerStatus defines the ESP load balancer observed
              state.
            type: object
        type: object
    served: true
    storage: false
    subresources:
      status: {}

---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.16.5
  name: esprouters.iot.sas.com
spec:
  conversion:
    strategy: None
  group: iot.sas.com
  names:
    kind: ESPRouter
    listKind: ESPRouterList
    plural: esprouters
    singular: esprouter
  scope: Namespaced
  versions:
  - name: v1
    schema:
      openAPIV3Schema:
        description: ESPRouter defines an ESP router to define routes between ESP
          route sources and ESP route destinations.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: ESPRouterSpec defines the ESP router desired state.
            properties:
              deployment:
                description: |-
                  Deployment is a ESP template that represents a Kubernetes Deployment.
                  Placeholders in fields are replaced with values before the Kubernetes Deployment is created.
                type: object
                x-kubernetes-preserve-unknown-fields: true
              destinations:
                items:
                  description: ESPDestination defines an ESP route destination.
                  properties:
                    name:
                      type: string
                    opcode:
                      type: string
                    projectFunc:
                      type: string
                    queryFunc:
                      type: string
                    windowFunc:
                      type: string
                  required:
                  - name
                  - opcode
                  - projectFunc
                  - queryFunc
                  - windowFunc
                  type: object
                type: array
              espProperties:
                additionalProperties:
                  type: string
                type: object
                x-kubernetes-preserve-unknown-fields: true
              routes:
                items:
                  description: ESPRoute defines an ESP route between an ESP route
                    source and an ESP route destination.
                  properties:
                    from:
                      type: string
                    to:
                      type: string
                  required:
                  - from
                  - to
                  type: object
                type: array
              sources:
                items:
                  description: ESPSource defines an ESP router source.
                  properties:
                    name:
                      type: string
                    projectExpr:
                      type: string
                    queryExpr:
                      type: string
                    windowExpr:
                      type: string
                  required:
                  - name
                  - projectExpr
                  - queryExpr
                  - windowExpr
                  type: object
                type: array
            required:
            - destinations
            - espProperties
            - routes
            - sources
            type: object
          status:
            description: ESPRouterStatus defines the ESP router observed state.
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: ESPRouter defines an ESP router to define routes between ESP
          route sources and ESP route destinations.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: ESPRouterSpec defines the ESP router desired state.
            properties:
              deployment:
                description: |-
                  Deployment is a ESP template that represents a Kubernetes Deployment.
                  Placeholders in fields are replaced with values before the Kubernetes Deployment is created.
                type: object
                x-kubernetes-preserve-unknown-fields: true
              destinations:
                items:
                  description: ESPDestination defines an ESP route destination.
                  properties:
                    name:
                      type: string
                    opcode:
                      type: string
                    projectFunc:
                      type: string
                    queryFunc:
                      type: string
                    windowFunc:
                      type: string
                  required:
                  - name
                  - opcode
                  - projectFunc
                  - queryFunc
                  - windowFunc
                  type: object
                type: array
              espProperties:
                additionalProperties:
                  type: string
                type: object
                x-kubernetes-preserve-unknown-fields: true
              routes:
                items:
                  description: ESPRoute defines an ESP route between an ESP route
                    source and an ESP route destination.
                  properties:
                    from:
                      type: string
                    to:
                      type: string
                  required:
                  - from
                  - to
                  type: object
                type: array
              sources:
                items:
                  description: ESPSource defines an ESP router source.
                  properties:
                    name:
                      type: string
                    projectExpr:
                      type: string
                    queryExpr:
                      type: string
                    windowExpr:
                      type: string
                  required:
                  - name
                  - projectExpr
                  - queryExpr
                  - windowExpr
                  type: object
                type: array
            required:
            - destinations
            - espProperties
            - routes
            - sources
            type: object
          status:
            description: ESPRouterStatus defines the ESP router observed state.
            type: object
        type: object
    served: true
    storage: false
    subresources:
      status: {}

---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.16.5
  name: espservers.iot.sas.com
spec:
  conversion:
    strategy: None
  group: iot.sas.com
  names:
    kind: ESPServer
    listKind: ESPServerList
    plural: espservers
    singular: espserver
  scope: Namespaced
  versions:
  - name: v1
    schema:
      openAPIV3Schema:
        description: ESPServer defines an ESP server.
        properties:
          access:
            description: ESPServerAccess defines ESP server access configuration.
            properties:
              externalURL:
                type: string
              internalHostName:
                type: string
              internalHttpPort:
                type: integer
              state:
                type: string
            required:
            - externalURL
            - internalHostName
            - internalHttpPort
            - state
            type: object
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: ESPServerSpec defines the ESP server desired state.
            properties:
              espProperties:
                additionalProperties:
                  type: string
                type: object
                x-kubernetes-preserve-unknown-fields: true
              failover:
                type: boolean
              loadBalancePolicy:
                description: |-
                  LoadBalancePolicy is the load balancing policy used to distribute events across active ESP Server replicas for a project.
                  Valid values are:
                  "default" use the default load balancing policy;
                  "lb-consistent-hash" deterministic hash-based load balancing;
                  "lb-hash" hash-based load balancing;
                  "lb-multicast" events are sent to all replicas;
                  "lb-round-robin" events are sent to replicas using round robin.
                enum:
                - default
                - lb-consistent-hash
                - lb-hash
                - lb-multicast
                - lb-round-robin
                type: string
              loadBalancer:
                description: ESPLoadBalancerTargets defines ESP server load balancer
                  targets.
                properties:
                  targets:
                    items:
                      description: ESPTarget defines a ESP server stream target.
                      properties:
                        connectors:
                          items:
                            description: ESPConnector defines the ESP load balancer
                              stream sources.
                            properties:
                              class:
                                type: string
                              properties:
                                additionalProperties:
                                  type: string
                                type: object
                              type:
                                type: string
                            required:
                            - class
                            - properties
                            - type
                            type: object
                          type: array
                        hashFields:
                          items:
                            type: string
                          type: array
                        projectName:
                          description: targets define where traffic stream to/from
                          type: string
                        queryName:
                          type: string
                        schema:
                          description: ESPSchema defines the ESP stream window.
                          properties:
                            fields:
                              items:
                                description: ESPField defines the ESP stream window
                                  fields.
                                properties:
                                  key:
                                    type: string
                                  name:
                                    type: string
                                  type:
                                    type: string
                                required:
                                - name
                                - type
                                type: object
                              type: array
                          type: object
                        schemaString:
                          type: string
                        type:
                          type: string
                        windowName:
                          type: string
                      required:
                      - connectors
                      - projectName
                      - queryName
                      - type
                      - windowName
                      type: object
                    type: array
                required:
                - targets
                type: object
              loadBalancerTemplate:
                description: ESPLoadBalancerTemplate defines an ESP server load balancer
                  template.
                properties:
                  deployment:
                    description: |-
                      Deployment is a ESP template that represents a Kubernetes Deployment.
                      Placeholders in fields are replaced with values before the Kubernetes Deployment is created.
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                type: object
              model:
                description: |-
                  Model is the ESP server project XML model.
                  Valid values may be:
                  (1) A project XML value (e.g., "<project ...>...</project>").
                  (2) A base64-encoded project XML value (with an optional "b64" prefix).
                  (3) A base64-encoded, GZip'ed project XML value (with an optional "b64" prefix).
                  If the value exceeds 98304 bytes (96KiB), warnings will be logged.
                  The value must not exceed 8388608 bytes (8MiB).
                  If you have a large project XML, consider using the "espProperties/server.model" configuration instead and set it to a file URL (e.g., "file:///absolute/path/to/project/xml").
                type: string
              name:
                type: string
              projectTemplate:
                description: ESPProjectTemplate defines an ESP server project template.
                properties:
                  autoscale:
                    description: ESPautoscaler defines ESP server Kubernetes pod autoscaling
                      configuration.
                    properties:
                      maxReplicas:
                        format: int32
                        type: integer
                      metrics:
                        items:
                          description: |-
                            MetricSpec specifies how to scale based on a single metric
                            (only `type` and one other matching field should be set at once).
                          properties:
                            containerResource:
                              description: |-
                                containerResource refers to a resource metric (such as those specified in
                                requests and limits) known to Kubernetes describing a single container in
                                each pod of the current scale target (e.g. CPU or memory). Such metrics are
                                built in to Kubernetes, and have special scaling options on top of those
                                available to normal per-pod metrics using the "pods" source.
                              properties:
                                container:
                                  description: container is the name of the container
                                    in the pods of the scaling target
                                  type: string
                                name:
                                  description: name is the name of the resource in
                                    question.
                                  type: string
                                target:
                                  description: target specifies the target value for
                                    the given metric
                                  properties:
                                    averageUtilization:
                                      description: |-
                                        averageUtilization is the target value of the average of the
                                        resource metric across all relevant pods, represented as a percentage of
                                        the requested value of the resource for the pods.
                                        Currently only valid for Resource metric source type
                                      format: int32
                                      type: integer
                                    averageValue:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: |-
                                        averageValue is the target value of the average of the
                                        metric across all relevant pods (as a quantity)
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                    type:
                                      description: type represents whether the metric
                                        type is Utilization, Value, or AverageValue
                                      type: string
                                    value:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: value is the target value of the
                                        metric (as a quantity).
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                  required:
                                  - type
                                  type: object
                              required:
                              - container
                              - name
                              - target
                              type: object
                            external:
                              description: |-
                                external refers to a global metric that is not associated
                                with any Kubernetes object. It allows autoscaling based on information
                                coming from components running outside of cluster
                                (for example length of queue in cloud messaging service, or
                                QPS from loadbalancer running outside of cluster).
                              properties:
                                metric:
                                  description: metric identifies the target metric
                                    by name and selector
                                  properties:
                                    name:
                                      description: name is the name of the given metric
                                      type: string
                                    selector:
                                      description: |-
                                        selector is the string-encoded form of a standard kubernetes label selector for the given metric
                                        When set, it is passed as an additional parameter to the metrics server for more specific metrics scoping.
                                        When unset, just the metricName will be used to gather metrics.
                                      properties:
                                        matchExpressions:
                                          description: matchExpressions is a list
                                            of label selector requirements. The requirements
                                            are ANDed.
                                          items:
                                            description: |-
                                              A label selector requirement is a selector that contains values, a key, and an operator that
                                              relates the key and values.
                                            properties:
                                              key:
                                                description: key is the label key
                                                  that the selector applies to.
                                                type: string
                                              operator:
                                                description: |-
                                                  operator represents a key's relationship to a set of values.
                                                  Valid operators are In, NotIn, Exists and DoesNotExist.
                                                type: string
                                              values:
                                                description: |-
                                                  values is an array of string values. If the operator is In or NotIn,
                                                  the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                  the values array must be empty. This array is replaced during a strategic
                                                  merge patch.
                                                items:
                                                  type: string
                                                type: array
                                                x-kubernetes-list-type: atomic
                                            required:
                                            - key
                                            - operator
                                            type: object
                                          type: array
                                          x-kubernetes-list-type: atomic
                                        matchLabels:
                                          additionalProperties:
                                            type: string
                                          description: |-
                                            matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                            map is equivalent to an element of matchExpressions, whose key field is "key", the
                                            operator is "In", and the values array contains only "value". The requirements are ANDed.
                                          type: object
                                      type: object
                                      x-kubernetes-map-type: atomic
                                  required:
                                  - name
                                  type: object
                                target:
                                  description: target specifies the target value for
                                    the given metric
                                  properties:
                                    averageUtilization:
                                      description: |-
                                        averageUtilization is the target value of the average of the
                                        resource metric across all relevant pods, represented as a percentage of
                                        the requested value of the resource for the pods.
                                        Currently only valid for Resource metric source type
                                      format: int32
                                      type: integer
                                    averageValue:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: |-
                                        averageValue is the target value of the average of the
                                        metric across all relevant pods (as a quantity)
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                    type:
                                      description: type represents whether the metric
                                        type is Utilization, Value, or AverageValue
                                      type: string
                                    value:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: value is the target value of the
                                        metric (as a quantity).
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                  required:
                                  - type
                                  type: object
                              required:
                              - metric
                              - target
                              type: object
                            object:
                              description: |-
                                object refers to a metric describing a single kubernetes object
                                (for example, hits-per-second on an Ingress object).
                              properties:
                                describedObject:
                                  description: describedObject specifies the descriptions
                                    of a object,such as kind,name apiVersion
                                  properties:
                                    apiVersion:
                                      description: apiVersion is the API version of
                                        the referent
                                      type: string
                                    kind:
                                      description: 'kind is the kind of the referent;
                                        More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
                                      type: string
                                    name:
                                      description: 'name is the name of the referent;
                                        More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                      type: string
                                  required:
                                  - kind
                                  - name
                                  type: object
                                metric:
                                  description: metric identifies the target metric
                                    by name and selector
                                  properties:
                                    name:
                                      description: name is the name of the given metric
                                      type: string
                                    selector:
                                      description: |-
                                        selector is the string-encoded form of a standard kubernetes label selector for the given metric
                                        When set, it is passed as an additional parameter to the metrics server for more specific metrics scoping.
                                        When unset, just the metricName will be used to gather metrics.
                                      properties:
                                        matchExpressions:
                                          description: matchExpressions is a list
                                            of label selector requirements. The requirements
                                            are ANDed.
                                          items:
                                            description: |-
                                              A label selector requirement is a selector that contains values, a key, and an operator that
                                              relates the key and values.
                                            properties:
                                              key:
                                                description: key is the label key
                                                  that the selector applies to.
                                                type: string
                                              operator:
                                                description: |-
                                                  operator represents a key's relationship to a set of values.
                                                  Valid operators are In, NotIn, Exists and DoesNotExist.
                                                type: string
                                              values:
                                                description: |-
                                                  values is an array of string values. If the operator is In or NotIn,
                                                  the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                  the values array must be empty. This array is replaced during a strategic
                                                  merge patch.
                                                items:
                                                  type: string
                                                type: array
                                                x-kubernetes-list-type: atomic
                                            required:
                                            - key
                                            - operator
                                            type: object
                                          type: array
                                          x-kubernetes-list-type: atomic
                                        matchLabels:
                                          additionalProperties:
                                            type: string
                                          description: |-
                                            matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                            map is equivalent to an element of matchExpressions, whose key field is "key", the
                                            operator is "In", and the values array contains only "value". The requirements are ANDed.
                                          type: object
                                      type: object
                                      x-kubernetes-map-type: atomic
                                  required:
                                  - name
                                  type: object
                                target:
                                  description: target specifies the target value for
                                    the given metric
                                  properties:
                                    averageUtilization:
                                      description: |-
                                        averageUtilization is the target value of the average of the
                                        resource metric across all relevant pods, represented as a percentage of
                                        the requested value of the resource for the pods.
                                        Currently only valid for Resource metric source type
                                      format: int32
                                      type: integer
                                    averageValue:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: |-
                                        averageValue is the target value of the average of the
                                        metric across all relevant pods (as a quantity)
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                    type:
                                      description: type represents whether the metric
                                        type is Utilization, Value, or AverageValue
                                      type: string
                                    value:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: value is the target value of the
                                        metric (as a quantity).
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                  required:
                                  - type
                                  type: object
                              required:
                              - describedObject
                              - metric
                              - target
                              type: object
                            pods:
                              description: |-
                                pods refers to a metric describing each pod in the current scale target
                                (for example, transactions-processed-per-second).  The values will be
                                averaged together before being compared to the target value.
                              properties:
                                metric:
                                  description: metric identifies the target metric
                                    by name and selector
                                  properties:
                                    name:
                                      description: name is the name of the given metric
                                      type: string
                                    selector:
                                      description: |-
                                        selector is the string-encoded form of a standard kubernetes label selector for the given metric
                                        When set, it is passed as an additional parameter to the metrics server for more specific metrics scoping.
                                        When unset, just the metricName will be used to gather metrics.
                                      properties:
                                        matchExpressions:
                                          description: matchExpressions is a list
                                            of label selector requirements. The requirements
                                            are ANDed.
                                          items:
                                            description: |-
                                              A label selector requirement is a selector that contains values, a key, and an operator that
                                              relates the key and values.
                                            properties:
                                              key:
                                                description: key is the label key
                                                  that the selector applies to.
                                                type: string
                                              operator:
                                                description: |-
                                                  operator represents a key's relationship to a set of values.
                                                  Valid operators are In, NotIn, Exists and DoesNotExist.
                                                type: string
                                              values:
                                                description: |-
                                                  values is an array of string values. If the operator is In or NotIn,
                                                  the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                  the values array must be empty. This array is replaced during a strategic
                                                  merge patch.
                                                items:
                                                  type: string
                                                type: array
                                                x-kubernetes-list-type: atomic
                                            required:
                                            - key
                                            - operator
                                            type: object
                                          type: array
                                          x-kubernetes-list-type: atomic
                                        matchLabels:
                                          additionalProperties:
                                            type: string
                                          description: |-
                                            matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                            map is equivalent to an element of matchExpressions, whose key field is "key", the
                                            operator is "In", and the values array contains only "value". The requirements are ANDed.
                                          type: object
                                      type: object
                                      x-kubernetes-map-type: atomic
                                  required:
                                  - name
                                  type: object
                                target:
                                  description: target specifies the target value for
                                    the given metric
                                  properties:
                                    averageUtilization:
                                      description: |-
                                        averageUtilization is the target value of the average of the
                                        resource metric across all relevant pods, represented as a percentage of
                                        the requested value of the resource for the pods.
                                        Currently only valid for Resource metric source type
                                      format: int32
                                      type: integer
                                    averageValue:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: |-
                                        averageValue is the target value of the average of the
                                        metric across all relevant pods (as a quantity)
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                    type:
                                      description: type represents whether the metric
                                        type is Utilization, Value, or AverageValue
                                      type: string
                                    value:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: value is the target value of the
                                        metric (as a quantity).
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                  required:
                                  - type
                                  type: object
                              required:
                              - metric
                              - target
                              type: object
                            resource:
                              description: |-
                                resource refers to a resource metric (such as those specified in
                                requests and limits) known to Kubernetes describing each pod in the
                                current scale target (e.g. CPU or memory). Such metrics are built in to
                                Kubernetes, and have special scaling options on top of those available
                                to normal per-pod metrics using the "pods" source.
                              properties:
                                name:
                                  description: name is the name of the resource in
                                    question.
                                  type: string
                                target:
                                  description: target specifies the target value for
                                    the given metric
                                  properties:
                                    averageUtilization:
                                      description: |-
                                        averageUtilization is the target value of the average of the
                                        resource metric across all relevant pods, represented as a percentage of
                                        the requested value of the resource for the pods.
                                        Currently only valid for Resource metric source type
                                      format: int32
                                      type: integer
                                    averageValue:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: |-
                                        averageValue is the target value of the average of the
                                        metric across all relevant pods (as a quantity)
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                    type:
                                      description: type represents whether the metric
                                        type is Utilization, Value, or AverageValue
                                      type: string
                                    value:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: value is the target value of the
                                        metric (as a quantity).
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                  required:
                                  - type
                                  type: object
                              required:
                              - name
                              - target
                              type: object
                            type:
                              description: |-
                                type is the type of metric source.  It should be one of "ContainerResource", "External",
                                "Object", "Pods" or "Resource", each mapping to a matching field in the object.
                              type: string
                          required:
                          - type
                          type: object
                        type: array
                      minReplicas:
                        format: int32
                        type: integer
                    required:
                    - maxReplicas
                    - metrics
                    - minReplicas
                    type: object
                  deployment:
                    description: |-
                      Deployment is a ESP template that represents a Kubernetes Deployment.
                      Placeholders in fields are replaced with values before the Kubernetes Deployment is created.
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  httpProxy:
                    description: |-
                      Proxy is a ESP template that represents a Kubernetes Contour HTTPProxy.
                      Placeholders in fields are replaced with values before the Kubernetes Contour HTTPProxy is created.
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  httpService:
                    description: |-
                      HTTPService is a ESP template that represents a Kubernetes Service.
                      Placeholders in fields are replaced with values before the Kubernetes Service is created.
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  ingress:
                    description: |-
                      Ingress is a ESP template that represents a Kubernetes Ingress.
                      Placeholders in fields are replaced with values before the Kubernetes Ingress is created.
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  pubsubService:
                    description: |-
                      PubsubService is a ESP template that represents a Kubernetes Service.
                      Placeholders in fields are replaced with values before the Kubernetes Service is created.
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  route:
                    description: |-
                      Route is a ESP template that represents a Kubernetes OpenShift Route.
                      Placeholders in fields are replaced with values before the Kubernetes OpenShift Route is created.
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                type: object
            required:
            - espProperties
            - failover
            - loadBalancePolicy
            - model
            - name
            - projectTemplate
            type: object
        type: object
    served: true
    storage: true
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: ESPServer defines an ESP server.
        properties:
          access:
            description: ESPServerAccess defines ESP server access configuration.
            properties:
              externalURL:
                type: string
              internalHostName:
                type: string
              internalHttpPort:
                type: integer
              state:
                type: string
            required:
            - externalURL
            - internalHostName
            - internalHttpPort
            - state
            type: object
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: ESPServerSpec defines the ESP server desired state.
            properties:
              espProperties:
                additionalProperties:
                  type: string
                type: object
                x-kubernetes-preserve-unknown-fields: true
              failover:
                type: boolean
              loadBalancePolicy:
                description: |-
                  LoadBalancePolicy is the load balancing policy used to distribute events across active ESP Server replicas for a project.
                  Valid values are:
                  "default" use the default load balancing policy;
                  "lb-consistent-hash" deterministic hash-based load balancing;
                  "lb-hash" hash-based load balancing;
                  "lb-multicast" events are sent to all replicas;
                  "lb-round-robin" events are sent to replicas using round robin.
                enum:
                - default
                - lb-consistent-hash
                - lb-hash
                - lb-multicast
                - lb-round-robin
                type: string
              loadBalancer:
                description: ESPLoadBalancerTargets defines ESP server load balancer
                  targets.
                properties:
                  targets:
                    items:
                      description: ESPTarget defines a ESP server stream target.
                      properties:
                        connectors:
                          items:
                            description: ESPConnector defines the ESP load balancer
                              stream sources.
                            properties:
                              class:
                                type: string
                              properties:
                                additionalProperties:
                                  type: string
                                type: object
                              type:
                                type: string
                            required:
                            - class
                            - properties
                            - type
                            type: object
                          type: array
                        hashFields:
                          items:
                            type: string
                          type: array
                        projectName:
                          description: targets define where traffic stream to/from
                          type: string
                        queryName:
                          type: string
                        schema:
                          description: ESPSchema defines the ESP stream window.
                          properties:
                            fields:
                              items:
                                description: ESPField defines the ESP stream window
                                  fields.
                                properties:
                                  key:
                                    type: string
                                  name:
                                    type: string
                                  type:
                                    type: string
                                required:
                                - name
                                - type
                                type: object
                              type: array
                          type: object
                        schemaString:
                          type: string
                        type:
                          type: string
                        windowName:
                          type: string
                      required:
                      - connectors
                      - projectName
                      - queryName
                      - type
                      - windowName
                      type: object
                    type: array
                required:
                - targets
                type: object
              loadBalancerTemplate:
                description: ESPLoadBalancerTemplate defines an ESP server load balancer
                  template.
                properties:
                  deployment:
                    description: |-
                      Deployment is a ESP template that represents a Kubernetes Deployment.
                      Placeholders in fields are replaced with values before the Kubernetes Deployment is created.
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                type: object
              model:
                description: |-
                  Model is the ESP server project XML model.
                  Valid values may be:
                  (1) A project XML value (e.g., "<project ...>...</project>").
                  (2) A base64-encoded project XML value (with an optional "b64" prefix).
                  (3) A base64-encoded, GZip'ed project XML value (with an optional "b64" prefix).
                  If the value exceeds 98304 bytes (96KiB), warnings will be logged.
                  The value must not exceed 8388608 bytes (8MiB).
                  If you have a large project XML, consider using the "espProperties/server.model" configuration instead and set it to a file URL (e.g., "file:///absolute/path/to/project/xml").
                type: string
              name:
                type: string
              projectTemplate:
                description: ESPProjectTemplate defines an ESP server project template.
                properties:
                  autoscale:
                    description: ESPautoscaler defines ESP server Kubernetes pod autoscaling
                      configuration.
                    properties:
                      maxReplicas:
                        format: int32
                        type: integer
                      metrics:
                        items:
                          description: |-
                            MetricSpec specifies how to scale based on a single metric
                            (only `type` and one other matching field should be set at once).
                          properties:
                            containerResource:
                              description: |-
                                containerResource refers to a resource metric (such as those specified in
                                requests and limits) known to Kubernetes describing a single container in
                                each pod of the current scale target (e.g. CPU or memory). Such metrics are
                                built in to Kubernetes, and have special scaling options on top of those
                                available to normal per-pod metrics using the "pods" source.
                              properties:
                                container:
                                  description: container is the name of the container
                                    in the pods of the scaling target
                                  type: string
                                name:
                                  description: name is the name of the resource in
                                    question.
                                  type: string
                                target:
                                  description: target specifies the target value for
                                    the given metric
                                  properties:
                                    averageUtilization:
                                      description: |-
                                        averageUtilization is the target value of the average of the
                                        resource metric across all relevant pods, represented as a percentage of
                                        the requested value of the resource for the pods.
                                        Currently only valid for Resource metric source type
                                      format: int32
                                      type: integer
                                    averageValue:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: |-
                                        averageValue is the target value of the average of the
                                        metric across all relevant pods (as a quantity)
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                    type:
                                      description: type represents whether the metric
                                        type is Utilization, Value, or AverageValue
                                      type: string
                                    value:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: value is the target value of the
                                        metric (as a quantity).
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                  required:
                                  - type
                                  type: object
                              required:
                              - container
                              - name
                              - target
                              type: object
                            external:
                              description: |-
                                external refers to a global metric that is not associated
                                with any Kubernetes object. It allows autoscaling based on information
                                coming from components running outside of cluster
                                (for example length of queue in cloud messaging service, or
                                QPS from loadbalancer running outside of cluster).
                              properties:
                                metric:
                                  description: metric identifies the target metric
                                    by name and selector
                                  properties:
                                    name:
                                      description: name is the name of the given metric
                                      type: string
                                    selector:
                                      description: |-
                                        selector is the string-encoded form of a standard kubernetes label selector for the given metric
                                        When set, it is passed as an additional parameter to the metrics server for more specific metrics scoping.
                                        When unset, just the metricName will be used to gather metrics.
                                      properties:
                                        matchExpressions:
                                          description: matchExpressions is a list
                                            of label selector requirements. The requirements
                                            are ANDed.
                                          items:
                                            description: |-
                                              A label selector requirement is a selector that contains values, a key, and an operator that
                                              relates the key and values.
                                            properties:
                                              key:
                                                description: key is the label key
                                                  that the selector applies to.
                                                type: string
                                              operator:
                                                description: |-
                                                  operator represents a key's relationship to a set of values.
                                                  Valid operators are In, NotIn, Exists and DoesNotExist.
                                                type: string
                                              values:
                                                description: |-
                                                  values is an array of string values. If the operator is In or NotIn,
                                                  the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                  the values array must be empty. This array is replaced during a strategic
                                                  merge patch.
                                                items:
                                                  type: string
                                                type: array
                                                x-kubernetes-list-type: atomic
                                            required:
                                            - key
                                            - operator
                                            type: object
                                          type: array
                                          x-kubernetes-list-type: atomic
                                        matchLabels:
                                          additionalProperties:
                                            type: string
                                          description: |-
                                            matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                            map is equivalent to an element of matchExpressions, whose key field is "key", the
                                            operator is "In", and the values array contains only "value". The requirements are ANDed.
                                          type: object
                                      type: object
                                      x-kubernetes-map-type: atomic
                                  required:
                                  - name
                                  type: object
                                target:
                                  description: target specifies the target value for
                                    the given metric
                                  properties:
                                    averageUtilization:
                                      description: |-
                                        averageUtilization is the target value of the average of the
                                        resource metric across all relevant pods, represented as a percentage of
                                        the requested value of the resource for the pods.
                                        Currently only valid for Resource metric source type
                                      format: int32
                                      type: integer
                                    averageValue:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: |-
                                        averageValue is the target value of the average of the
                                        metric across all relevant pods (as a quantity)
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                    type:
                                      description: type represents whether the metric
                                        type is Utilization, Value, or AverageValue
                                      type: string
                                    value:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: value is the target value of the
                                        metric (as a quantity).
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                  required:
                                  - type
                                  type: object
                              required:
                              - metric
                              - target
                              type: object
                            object:
                              description: |-
                                object refers to a metric describing a single kubernetes object
                                (for example, hits-per-second on an Ingress object).
                              properties:
                                describedObject:
                                  description: describedObject specifies the descriptions
                                    of a object,such as kind,name apiVersion
                                  properties:
                                    apiVersion:
                                      description: apiVersion is the API version of
                                        the referent
                                      type: string
                                    kind:
                                      description: 'kind is the kind of the referent;
                                        More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
                                      type: string
                                    name:
                                      description: 'name is the name of the referent;
                                        More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                      type: string
                                  required:
                                  - kind
                                  - name
                                  type: object
                                metric:
                                  description: metric identifies the target metric
                                    by name and selector
                                  properties:
                                    name:
                                      description: name is the name of the given metric
                                      type: string
                                    selector:
                                      description: |-
                                        selector is the string-encoded form of a standard kubernetes label selector for the given metric
                                        When set, it is passed as an additional parameter to the metrics server for more specific metrics scoping.
                                        When unset, just the metricName will be used to gather metrics.
                                      properties:
                                        matchExpressions:
                                          description: matchExpressions is a list
                                            of label selector requirements. The requirements
                                            are ANDed.
                                          items:
                                            description: |-
                                              A label selector requirement is a selector that contains values, a key, and an operator that
                                              relates the key and values.
                                            properties:
                                              key:
                                                description: key is the label key
                                                  that the selector applies to.
                                                type: string
                                              operator:
                                                description: |-
                                                  operator represents a key's relationship to a set of values.
                                                  Valid operators are In, NotIn, Exists and DoesNotExist.
                                                type: string
                                              values:
                                                description: |-
                                                  values is an array of string values. If the operator is In or NotIn,
                                                  the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                  the values array must be empty. This array is replaced during a strategic
                                                  merge patch.
                                                items:
                                                  type: string
                                                type: array
                                                x-kubernetes-list-type: atomic
                                            required:
                                            - key
                                            - operator
                                            type: object
                                          type: array
                                          x-kubernetes-list-type: atomic
                                        matchLabels:
                                          additionalProperties:
                                            type: string
                                          description: |-
                                            matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                            map is equivalent to an element of matchExpressions, whose key field is "key", the
                                            operator is "In", and the values array contains only "value". The requirements are ANDed.
                                          type: object
                                      type: object
                                      x-kubernetes-map-type: atomic
                                  required:
                                  - name
                                  type: object
                                target:
                                  description: target specifies the target value for
                                    the given metric
                                  properties:
                                    averageUtilization:
                                      description: |-
                                        averageUtilization is the target value of the average of the
                                        resource metric across all relevant pods, represented as a percentage of
                                        the requested value of the resource for the pods.
                                        Currently only valid for Resource metric source type
                                      format: int32
                                      type: integer
                                    averageValue:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: |-
                                        averageValue is the target value of the average of the
                                        metric across all relevant pods (as a quantity)
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                    type:
                                      description: type represents whether the metric
                                        type is Utilization, Value, or AverageValue
                                      type: string
                                    value:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: value is the target value of the
                                        metric (as a quantity).
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                  required:
                                  - type
                                  type: object
                              required:
                              - describedObject
                              - metric
                              - target
                              type: object
                            pods:
                              description: |-
                                pods refers to a metric describing each pod in the current scale target
                                (for example, transactions-processed-per-second).  The values will be
                                averaged together before being compared to the target value.
                              properties:
                                metric:
                                  description: metric identifies the target metric
                                    by name and selector
                                  properties:
                                    name:
                                      description: name is the name of the given metric
                                      type: string
                                    selector:
                                      description: |-
                                        selector is the string-encoded form of a standard kubernetes label selector for the given metric
                                        When set, it is passed as an additional parameter to the metrics server for more specific metrics scoping.
                                        When unset, just the metricName will be used to gather metrics.
                                      properties:
                                        matchExpressions:
                                          description: matchExpressions is a list
                                            of label selector requirements. The requirements
                                            are ANDed.
                                          items:
                                            description: |-
                                              A label selector requirement is a selector that contains values, a key, and an operator that
                                              relates the key and values.
                                            properties:
                                              key:
                                                description: key is the label key
                                                  that the selector applies to.
                                                type: string
                                              operator:
                                                description: |-
                                                  operator represents a key's relationship to a set of values.
                                                  Valid operators are In, NotIn, Exists and DoesNotExist.
                                                type: string
                                              values:
                                                description: |-
                                                  values is an array of string values. If the operator is In or NotIn,
                                                  the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                  the values array must be empty. This array is replaced during a strategic
                                                  merge patch.
                                                items:
                                                  type: string
                                                type: array
                                                x-kubernetes-list-type: atomic
                                            required:
                                            - key
                                            - operator
                                            type: object
                                          type: array
                                          x-kubernetes-list-type: atomic
                                        matchLabels:
                                          additionalProperties:
                                            type: string
                                          description: |-
                                            matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                            map is equivalent to an element of matchExpressions, whose key field is "key", the
                                            operator is "In", and the values array contains only "value". The requirements are ANDed.
                                          type: object
                                      type: object
                                      x-kubernetes-map-type: atomic
                                  required:
                                  - name
                                  type: object
                                target:
                                  description: target specifies the target value for
                                    the given metric
                                  properties:
                                    averageUtilization:
                                      description: |-
                                        averageUtilization is the target value of the average of the
                                        resource metric across all relevant pods, represented as a percentage of
                                        the requested value of the resource for the pods.
                                        Currently only valid for Resource metric source type
                                      format: int32
                                      type: integer
                                    averageValue:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: |-
                                        averageValue is the target value of the average of the
                                        metric across all relevant pods (as a quantity)
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                    type:
                                      description: type represents whether the metric
                                        type is Utilization, Value, or AverageValue
                                      type: string
                                    value:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: value is the target value of the
                                        metric (as a quantity).
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                  required:
                                  - type
                                  type: object
                              required:
                              - metric
                              - target
                              type: object
                            resource:
                              description: |-
                                resource refers to a resource metric (such as those specified in
                                requests and limits) known to Kubernetes describing each pod in the
                                current scale target (e.g. CPU or memory). Such metrics are built in to
                                Kubernetes, and have special scaling options on top of those available
                                to normal per-pod metrics using the "pods" source.
                              properties:
                                name:
                                  description: name is the name of the resource in
                                    question.
                                  type: string
                                target:
                                  description: target specifies the target value for
                                    the given metric
                                  properties:
                                    averageUtilization:
                                      description: |-
                                        averageUtilization is the target value of the average of the
                                        resource metric across all relevant pods, represented as a percentage of
                                        the requested value of the resource for the pods.
                                        Currently only valid for Resource metric source type
                                      format: int32
                                      type: integer
                                    averageValue:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: |-
                                        averageValue is the target value of the average of the
                                        metric across all relevant pods (as a quantity)
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                    type:
                                      description: type represents whether the metric
                                        type is Utilization, Value, or AverageValue
                                      type: string
                                    value:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: value is the target value of the
                                        metric (as a quantity).
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                  required:
                                  - type
                                  type: object
                              required:
                              - name
                              - target
                              type: object
                            type:
                              description: |-
                                type is the type of metric source.  It should be one of "ContainerResource", "External",
                                "Object", "Pods" or "Resource", each mapping to a matching field in the object.
                              type: string
                          required:
                          - type
                          type: object
                        type: array
                      minReplicas:
                        format: int32
                        type: integer
                    required:
                    - maxReplicas
                    - metrics
                    - minReplicas
                    type: object
                  deployment:
                    description: |-
                      Deployment is a ESP template that represents a Kubernetes Deployment.
                      Placeholders in fields are replaced with values before the Kubernetes Deployment is created.
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  httpProxy:
                    description: |-
                      Proxy is a ESP template that represents a Kubernetes Contour HTTPProxy.
                      Placeholders in fields are replaced with values before the Kubernetes Contour HTTPProxy is created.
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  httpService:
                    description: |-
                      HTTPService is a ESP template that represents a Kubernetes Service.
                      Placeholders in fields are replaced with values before the Kubernetes Service is created.
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  ingress:
                    description: |-
                      Ingress is a ESP template that represents a Kubernetes Ingress.
                      Placeholders in fields are replaced with values before the Kubernetes Ingress is created.
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  pubsubService:
                    description: |-
                      PubsubService is a ESP template that represents a Kubernetes Service.
                      Placeholders in fields are replaced with values before the Kubernetes Service is created.
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  route:
                    description: |-
                      Route is a ESP template that represents a Kubernetes OpenShift Route.
                      Placeholders in fields are replaced with values before the Kubernetes OpenShift Route is created.
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                type: object
            required:
            - espProperties
            - failover
            - loadBalancePolicy
            - model
            - name
            - projectTemplate
            type: object
        type: object
    served: true
    storage: false

---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.16.5
  name: espupdates.iot.sas.com
spec:
  conversion:
    strategy: None
  group: iot.sas.com
  names:
    kind: ESPUpdate
    listKind: ESPUpdateList
    plural: espupdates
    singular: espupdate
  scope: Namespaced
  versions:
  - name: v1
    schema:
      openAPIV3Schema:
        description: ESPUpdate defines the ESP update operation.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          response:
            description: ESPUpdateResponse defines the ESP update operation response.
            properties:
              reason:
                type: string
              succeeded:
                type: boolean
            type: object
          spec:
            description: ESPUpdateSpec defines the ESP update operation desired state.
            properties:
              gracePeriod:
                type: string
              policy:
                type: string
              selector:
                type: string
            required:
            - policy
            type: object
          status:
            description: ESPUpdateStatus defines the ESP update operation observed
              state.
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: ESPUpdate defines the ESP update operation.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          response:
            description: ESPUpdateResponse defines the ESP update operation response.
            properties:
              reason:
                type: string
              succeeded:
                type: boolean
            type: object
          spec:
            description: ESPUpdateSpec defines the ESP update operation desired state.
            properties:
              gracePeriod:
                type: string
              policy:
                type: string
              selector:
                type: string
            required:
            - policy
            type: object
          status:
            description: ESPUpdateStatus defines the ESP update operation observed
              state.
            type: object
        type: object
    served: true
    storage: false
    subresources:
      status: {}

---
apiVersion: v1
automountServiceAccountToken: true
kind: ServiceAccount
metadata:
  annotations:
    sas.com/kustomize-base: base
  labels:
    app.kubernetes.io/name: sas-esp-operator
  name: sas-esp-operator

---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: sas-esp-project

---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: sas-esp-operator
rules:
- apiGroups:
  - ""
  resources:
  - configmaps
  - endpoints
  - persistentvolumeclaims
  - pods
  - pods/log
  - secrets
  - services
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - ""
  resources:
  - events
  verbs:
  - create
  - get
  - list
  - patch
  - watch
- apiGroups:
  - apps
  resources:
  - deployments
  - replicasets
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - apps
  resourceNames:
  - sas-esp-operator
  resources:
  - deployments/finalizers
  verbs:
  - update
- apiGroups:
  - autoscaling
  resources:
  - horizontalpodautoscalers
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - cert-manager.io
  resources:
  - certificates
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - coordination.k8s.io
  resources:
  - leases
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - iot.sas.com
  resources:
  - espconfigs
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - iot.sas.com
  resources:
  - espconfigs/finalizers
  verbs:
  - update
- apiGroups:
  - iot.sas.com
  resources:
  - espconfigs/status
  verbs:
  - get
  - patch
  - update
- apiGroups:
  - iot.sas.com
  resources:
  - esploadbalancers
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - iot.sas.com
  resources:
  - esploadbalancers/finalizers
  verbs:
  - update
- apiGroups:
  - iot.sas.com
  resources:
  - esploadbalancers/status
  verbs:
  - get
  - patch
  - update
- apiGroups:
  - iot.sas.com
  resources:
  - esprouters
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - iot.sas.com
  resources:
  - esprouters/finalizers
  verbs:
  - update
- apiGroups:
  - iot.sas.com
  resources:
  - esprouters/status
  verbs:
  - get
  - patch
  - update
- apiGroups:
  - iot.sas.com
  resources:
  - espservers
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - iot.sas.com
  resources:
  - espservers/finalizers
  verbs:
  - update
- apiGroups:
  - iot.sas.com
  resources:
  - espservers/status
  verbs:
  - get
  - patch
  - update
- apiGroups:
  - iot.sas.com
  resources:
  - espupdates
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - iot.sas.com
  resources:
  - espupdates/finalizers
  verbs:
  - update
- apiGroups:
  - iot.sas.com
  resources:
  - espupdates/status
  verbs:
  - get
  - patch
  - update
- apiGroups:
  - monitoring.coreos.com
  resources:
  - servicemonitors
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - networking.k8s.io
  resources:
  - ingresses
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - projectcontour.io
  resources:
  - httpproxies
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - route.openshift.io
  resources:
  - routes
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch

---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: sas-esp-project
rules: []

---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  labels:
    app.kubernetes.io/name: sas-esp-operator
  name: sas-start-all-esp-servers
rules:
- apiGroups:
  - iot.sas.com
  resources:
  - espconfigs
  verbs:
  - get
  - list
  - patch
  - watch
- apiGroups:
  - iot.sas.com
  resources:
  - espservers
  verbs:
  - get
  - list
  - patch
  - watch

---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  labels:
    app.kubernetes.io/name: sas-esp-operator
  name: sas-stop-all-esp-servers
rules:
- apiGroups:
  - iot.sas.com
  resources:
  - espconfigs
  verbs:
  - get
  - list
  - patch
  - watch
- apiGroups:
  - iot.sas.com
  resources:
  - espservers
  verbs:
  - delete
  - get
  - list
  - patch
  - watch

---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: sas-esp-operator
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: sas-esp-operator
subjects:
- kind: ServiceAccount
  name: sas-esp-operator

---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: sas-esp-project
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: sas-esp-project
subjects:
- kind: ServiceAccount
  name: sas-esp-project

---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  labels:
    app.kubernetes.io/name: sas-esp-operator
  name: sas-start-all-esp-servers
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: sas-start-all-esp-servers
subjects:
- kind: ServiceAccount
  name: sas-start-all

---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  labels:
    app.kubernetes.io/name: sas-esp-operator
  name: sas-stop-all-esp-servers
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: sas-stop-all-esp-servers
subjects:
- kind: ServiceAccount
  name: sas-stop-all

---
apiVersion: apps/v1
kind: Deployment
metadata:
  annotations:
    sas.com/certificate-file-format: pem
    sas.com/kustomize-base: golang
    sidecar.istio.io/proxyCPU: 15m
    sidecar.istio.io/proxyMemory: 115Mi
  labels:
    app.kubernetes.io/name: sas-esp-operator
    sas.com/admin: namespace
    sas.com/deployment-base: golang
    sas.com/zero-scale-phase: "1"
    workload.sas.com/class: stateless
  name: sas-esp-operator
spec:
  replicas: 1
  selector:
    matchLabels:
      name: sas-esp-operator
  template:
    metadata:
      annotations:
        prometheus.io/path: /metrics
        prometheus.io/port: "8080"
        prometheus.io/scheme: http
        prometheus.io/scrape: "true"
        sas.com/certificate-file-format: pem
        sas.com/kustomize-base: golang
        sidecar.istio.io/proxyCPU: 15m
        sidecar.istio.io/proxyMemory: 115Mi
      labels:
        app: sas-esp-operator
        app.kubernetes.io/name: sas-esp-operator
        name: sas-esp-operator
        workload.sas.com/class: stateless
    spec:
      affinity:
        nodeAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - preference:
              matchExpressions:
              - key: workload.sas.com/class
                operator: In
                values:
                - stateless
            weight: 100
          - preference:
              matchExpressions:
              - key: workload.sas.com/class
                operator: NotIn
                values:
                - compute
                - cas
                - stateful
            weight: 50
          requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
            - matchExpressions:
              - key: kubernetes.azure.com/mode
                operator: NotIn
                values:
                - system
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - podAffinityTerm:
              labelSelector:
                matchExpressions:
                - key: app.kubernetes.io/name
                  operator: In
                  values:
                  - sas-esp-operator
              topologyKey: kubernetes.io/hostname
            weight: 100
          requiredDuringSchedulingIgnoredDuringExecution: []
      automountServiceAccountToken: true
      containers:
      - env:
        - name: WATCH_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: POD_NAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: SAS_LICENSE
          valueFrom:
            secretKeyRef:
              key: SAS_LICENSE
              name: sas-license
        - name: OPERATOR_NAME
          value: sas-esp-operator
        - name: ESPOP_ESPCONFIG
          value: sas-esp-operator
        - name: ESPOP_PUBLICHOSTNAME
          valueFrom:
            configMapKeyRef:
              key: INGRESS_HOST
              name: ingress-input
        - name: INGRESS_KIND
          valueFrom:
            configMapKeyRef:
              key: INGRESS_KIND
              name: ingress-input
        - name: ESPOP_SERVER__HTTP_PORT
          value: "31415"
        - name: ESPOP_SERVER__PUBSUB_PORT
          value: "31416"
        - name: SAS_K8S_DEPLOYMENT_NAME
          value: sas-esp-operator
        envFrom:
        - configMapRef:
            name: sas-shared-config
        - secretRef:
            name: sas-consul-client
        image: sas-esp-operator
        imagePullPolicy: IfNotPresent
        lifecycle:
          preStop:
            exec:
              command:
              - sh
              - -c
              - sleep 5
        name: sas-esp-operator
        ports:
        - containerPort: 8080
          name: http
          protocol: TCP
        resources:
          limits:
            cpu: 500m
            memory: 2000Mi
          requests:
            cpu: 50m
            memory: 50Mi
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            add: []
            drop:
            - ALL
          privileged: false
          readOnlyRootFilesystem: true
        volumeMounts:
        - mountPath: /tmp
          name: tmp
      imagePullSecrets: []
      securityContext:
        runAsNonRoot: true
        seccompProfile:
          type: RuntimeDefault
      serviceAccountName: sas-esp-operator
      tolerations:
      - effect: NoSchedule
        key: workload.sas.com/class
        operator: Equal
        value: stateful
      - effect: NoSchedule
        key: workload.sas.com/class
        operator: Equal
        value: stateless
      volumes:
      - emptyDir: {}
        name: tmp

---
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  annotations:
    sas.com/ha-class: centralized
    sas.com/kustomize-base: golang
  name: sas-esp-operator
spec:
  maxReplicas: 1
  metrics:
  - resource:
      name: cpu
      target:
        averageUtilization: 80
        type: Utilization
    type: Resource
  minReplicas: 1
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: sas-esp-operator

---
apiVersion: iot.sas.com/v1
kind: ESPConfig
metadata:
  annotations:
    esp.iot.sas.com/install-type: viya
    sas.com/certificate-file-format: pem
    sas.com/tls-mode: none
  name: sas-esp-operator
spec:
  espProperties:
    env.security.client.ca_cert_file: SAS_CERTIFICATE_CA_CERTIFICATE_FILE
    env.security.oauth2.client_id: ESPENV_security_oauth2_client_id
    env.security.oauth2.client_secret: ESPENV_security_oauth2_client_secret
    env.server.license: ESP_LICENSE
    meta.meteringcontext: SASEventStreamProcessingMetering/eventStreamProcessing/v1
    meta.meteringhost: http://sas-event-stream-processing-metering-app
    meta.meteringport: "80"
    meta.useOauthToken: "true"
    security.client.auth: oauth2.client_credentials
    security.oauth2.client.server_url: http://sas-logon-app/SASLogon/oauth/token
    security.server.internal_paths: metrics
    server.store-location: /mnt/data
  limits:
    maxCpu: "2"
    maxMemory: 4Gi
    maxReplicas: "5"
  loadBalancerTemplate:
    deployment:
      kind: ESPTemplate
      metadata:
        annotations:
          sas.com/certificate-file-format: pem
          sas.com/component-name: ((PROJECT_LB_SERVICE_NAME))
        labels:
          app.kubernetes.io/name: ((PROJECT_LB_SERVICE_NAME))
          workload.sas.com/class: stateless
        name: ((PROJECT_LB_SERVICE_NAME))
        namespace: ((PROJECT_NAMESPACE))
      spec:
        replicas: 1
        selector:
          matchLabels:
            app: ((PROJECT_LB_SERVICE_NAME))
        template:
          metadata:
            annotations:
              prometheus.io/path: /SASESP/metrics
              prometheus.io/port: "31415"
              prometheus.io/scheme: http
              prometheus.io/scrape: "true"
              sas.com/certificate-file-format: pem
              sas.com/component-name: ((PROJECT_LB_SERVICE_NAME))
            labels:
              app: ((PROJECT_LB_SERVICE_NAME))
              app.kubernetes.io/name: ((PROJECT_LB_SERVICE_NAME))
              workload.sas.com/class: compute
          spec:
            affinity:
              nodeAffinity:
                preferredDuringSchedulingIgnoredDuringExecution:
                - preference:
                    matchExpressions:
                    - key: workload.sas.com/class
                      operator: In
                      values:
                      - compute
                    matchFields: []
                  weight: 100
                - preference:
                    matchExpressions:
                    - key: workload.sas.com/class
                      operator: NotIn
                      values:
                      - cas
                      - stateful
                      - stateless
                    matchFields: []
                  weight: 50
                requiredDuringSchedulingIgnoredDuringExecution:
                  nodeSelectorTerms:
                  - matchExpressions:
                    - key: kubernetes.azure.com/mode
                      operator: NotIn
                      values:
                      - system
            automountServiceAccountToken: true
            containers:
            - env:
              - name: ESPENV_security_oauth2_client_id
                valueFrom:
                  secretKeyRef:
                    key: ESPENV_security_oauth2_client_id
                    name: esp-saslogon
              - name: ESPENV_security_oauth2_client_secret
                valueFrom:
                  secretKeyRef:
                    key: ESPENV_security_oauth2_client_secret
                    name: esp-saslogon
              - name: ESP_LICENSE
                valueFrom:
                  secretKeyRef:
                    key: SAS_LICENSE
                    name: sas-license
              envFrom: []
              image: sas-event-stream-processing-server-app
              imagePullPolicy: IfNotPresent
              name: ((PROJECT_SERVICE_NAME))
              readinessProbe:
                failureThreshold: 3
                httpGet:
                  path: /internal/ready
                  port: 31415
                  scheme: HTTP
              resources:
                limits:
                  cpu: "2"
                  memory: 2Gi
                requests:
                  cpu: "1"
                  memory: 1Gi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  add: []
                  drop:
                  - ALL
                privileged: false
                readOnlyRootFilesystem: true
              volumeMounts: []
            - env:
              - name: ESPLB_HTTP
                value: "31415"
              - name: ESPLB_PUBSUB
                value: "31416"
              - name: WATCH_NAMESPACE
                value: ((PROJECT_NAMESPACE))
              - name: ESPLB_PROJECT
                value: ((PROJECT_SERVICE_NAME))
              - name: POD_NAME
                valueFrom:
                  fieldRef:
                    fieldPath: metadata.name
              - name: ESPLB_VIYA
                value: "true"
              envFrom:
              - secretRef:
                  name: sas-consul-client
              - configMapRef:
                  name: sas-shared-config
              image: sas-esp-load-balancer
              imagePullPolicy: IfNotPresent
              name: ((PROJECT_LB_SERVICE_NAME))
              resources:
                limits:
                  cpu: "2"
                  memory: 2Gi
                requests:
                  cpu: "1"
                  memory: 1Gi
            imagePullSecrets:
            - name: sas-image-pull-secrets
            initContainers: []
            podAntiAffinity:
              preferredDuringSchedulingIgnoredDuringExecution:
              - podAffinityTerm:
                  labelSelector:
                    matchExpressions:
                    - key: app.kubernetes.io/name
                      operator: In
                      values:
                      - sas-event-stream-processing-server-app
                  topologyKey: kubernetes.io/hostname
                weight: 100
            securityContext:
              runAsNonRoot: true
            serviceAccountName: sas-esp-project
            tolerations:
            - effect: NoSchedule
              key: workload.sas.com/class
              operator: Equal
              value: compute
            volumes: []
  operatorProperties:
    server.enableViyaOauth2: "true"
  projectTemplate:
    autoscale:
      maxReplicas: 10
      metrics:
      - resource:
          name: cpu
          target:
            averageUtilization: 50
            type: Utilization
        type: Resource
      minReplicas: 1
    deployment:
      kind: ESPTemplate
      metadata:
        annotations:
          sas.com/certificate-file-format: pem
          sas.com/component-name: ((PROJECT_SERVICE_NAME))
        labels:
          app.kubernetes.io/name: ((PROJECT_SERVICE_NAME))
          workload.sas.com/class: compute
        name: ((PROJECT_SERVICE_NAME))
        namespace: ((PROJECT_NAMESPACE))
      spec:
        replicas: 1
        selector:
          matchLabels:
            app: ((PROJECT_SERVICE_NAME))
            type: esp
        template:
          metadata:
            annotations:
              prometheus.io/path: /SASESP/metrics
              prometheus.io/port: "31415"
              prometheus.io/scheme: http
              prometheus.io/scrape: "true"
              sas.com/certificate-file-format: pem
              sas.com/component-name: ((PROJECT_SERVICE_NAME))
            labels:
              app: ((PROJECT_SERVICE_NAME))
              app.kubernetes.io/name: ((PROJECT_SERVICE_NAME))
              project: ((PROJECT_HASHED_NAME))
              type: esp
              workload.sas.com/class: compute
          spec:
            affinity:
              nodeAffinity:
                preferredDuringSchedulingIgnoredDuringExecution:
                - preference:
                    matchExpressions:
                    - key: workload.sas.com/class
                      operator: In
                      values:
                      - compute
                    matchFields: []
                  weight: 100
                - preference:
                    matchExpressions:
                    - key: workload.sas.com/class
                      operator: NotIn
                      values:
                      - cas
                      - stateful
                      - stateless
                    matchFields: []
                  weight: 50
                requiredDuringSchedulingIgnoredDuringExecution:
                  nodeSelectorTerms:
                  - matchExpressions:
                    - key: kubernetes.azure.com/mode
                      operator: NotIn
                      values:
                      - system
            containers:
            - env:
              - name: ESPENV_security_oauth2_client_id
                valueFrom:
                  secretKeyRef:
                    key: ESPENV_security_oauth2_client_id
                    name: esp-saslogon
              - name: ESPENV_security_oauth2_client_secret
                valueFrom:
                  secretKeyRef:
                    key: ESPENV_security_oauth2_client_secret
                    name: esp-saslogon
              - name: ESP_LICENSE
                valueFrom:
                  secretKeyRef:
                    key: SAS_LICENSE
                    name: sas-license
              - name: MAS_PYPATH
                value: /usr/bin/python3
              - name: MAS_M2PATH
                value: /opt/sas/viya/home/SASFoundation/misc/embscoreeng/mas2py.py
              - name: TKTXTANIO_BINDAT_DIR
                value: /opt/sas/viya/home/SASFoundation/misc/tktg
              - name: MPLCONFIGDIR
                value: /tmp
              - name: CUDA_VISIBLE_DEVICES
                value: "0"
              - name: NVIDIA_DRIVER_CAPABILITIES
                value: all
              envFrom: []
              image: sas-event-stream-processing-server-app
              imagePullPolicy: IfNotPresent
              name: ((PROJECT_SERVICE_NAME))
              ports:
              - containerPort: 31415
                name: http
              - containerPort: 31416
                name: pubsub
              readinessProbe:
                failureThreshold: 3
                httpGet:
                  path: /internal/ready
                  port: 31415
                  scheme: HTTP
              resources:
                limits:
                  cpu: "2"
                  memory: 2Gi
                requests:
                  cpu: "1"
                  memory: 1Gi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  add: []
                  drop:
                  - ALL
                privileged: false
                readOnlyRootFilesystem: true
              volumeMounts:
              - mountPath: /tmp
                name: tmp
            imagePullSecrets:
            - name: sas-image-pull-secrets
            initContainers: []
            podAntiAffinity:
              preferredDuringSchedulingIgnoredDuringExecution:
              - podAffinityTerm:
                  labelSelector:
                    matchExpressions:
                    - key: app.kubernetes.io/name
                      operator: In
                      values:
                      - sas-event-stream-processing-server-app
                  topologyKey: kubernetes.io/hostname
                weight: 100
            securityContext:
              runAsNonRoot: true
              seccompProfile:
                type: RuntimeDefault
            serviceAccountName: sas-esp-project
            tolerations:
            - effect: NoSchedule
              key: workload.sas.com/class
              operator: Equal
              value: compute
            volumes:
            - emptyDir: {}
              name: tmp
    httpProxy:
      kind: ESPTemplate
      metadata:
        annotations:
          sas.com/kustomize-base: base
        labels:
          app.kubernetes.io/name: $(PROJECT_SERVICE_NAME)
        name: ((PROJECT_SERVICE_NAME))
        namespace: ((PROJECT_NAMESPACE))
      spec:
        routes:
        - conditions:
          - prefix: /SASEventStreamProcessingServer/((PROJECT_SERVICE_NAME))
          pathRewritePolicy:
            replacePrefix:
            - replacement: /
          services:
          - name: ((PROJECT_SERVICE_NAME))
            port: 80
    httpService:
      kind: ESPTemplate
      metadata:
        annotations:
          prometheus.io/path: /SASESP/metrics
          prometheus.io/port: "80"
          prometheus.io/scheme: http
          prometheus.io/scrape: "true"
          sas.com/readiness-check: disabled
        labels:
          app: ((PROJECT_SERVICE_NAME))
          app.kubernetes.io/name: ((PROJECT_SERVICE_NAME))
          esp-component: project
          project: ((PROJECT_HASHED_NAME))
          type: http
        name: ((PROJECT_SERVICE_NAME))
        namespace: ((PROJECT_NAMESPACE))
      spec:
        ports:
        - name: http
          port: 80
          protocol: TCP
          targetPort: http
        selector:
          app: ((PROJECT_SERVICE_NAME))
    ingress:
      kind: ESPTemplate
      metadata:
        annotations:
          nginx.ingress.kubernetes.io/rewrite-target: /$2
          nginx.ingress.kubernetes.io/use-regex: "true"
        labels:
          app: ((PROJECT_SERVICE_NAME))
          type: esp
        name: ((PROJECT_SERVICE_NAME))
        namespace: ((PROJECT_NAMESPACE))
      spec:
        ingressClassName: nginx
        rules:
        - host: ((PUBLIC_HOST_NAME))
          http:
            paths:
            - backend:
                service:
                  name: ((PROJECT_SERVICE_NAME))
                  port:
                    number: 80
              path: /SASEventStreamProcessingServer/((PROJECT_SERVICE_NAME))(/|$)(.*)
              pathType: ImplementationSpecific
    pubsubService:
      kind: ESPTemplate
      metadata:
        labels:
          app: ((PROJECT_SERVICE_NAME))
          project: ((PROJECT_HASHED_NAME))
          sas.com/readiness-check: disabled
          type: pubsub
        name: ((PROJECT_PUBSUB_SERVICE_NAME))
        namespace: ((PROJECT_NAMESPACE))
      spec:
        clusterIP: None
        ports:
        - name: pubsub
          port: 31416
          protocol: TCP
          targetPort: pubsub
        selector:
          app: ((PROJECT_SERVICE_NAME))
    route:
      kind: ESPTemplate
      metadata:
        annotations:
          haproxy.router.openshift.io/rewrite-target: /
        name: ((PROJECT_SERVICE_NAME))
        namespace: ((PROJECT_NAMESPACE))
      spec:
        host: ((PUBLIC_HOST_NAME))
        path: /SASEventStreamProcessingServer/((PROJECT_SERVICE_NAME))
        port:
          targetPort: http
        tls: null
        to:
          kind: Service
          name: ((PROJECT_SERVICE_NAME))
  routerTemplate:
    deployment:
      kind: ESPTemplate
      metadata:
        annotations:
          sas.com/certificate-file-format: pem
          sas.com/component-name: ((ROUTER_NAME))
        labels:
          app: ((ROUTER_NAME))
          type: router
        name: ((ROUTER_NAME))
        namespace: ((ROUTER_NAMESPACE))
      spec:
        replicas: 1
        selector:
          matchLabels:
            type: router
        template:
          metadata:
            annotations:
              prometheus.io/path: /SASESP/metrics
              prometheus.io/port: "31415"
              prometheus.io/scheme: http
              prometheus.io/scrape: "true"
              sas.com/certificate-file-format: pem
              sas.com/component-name: ((ROUTER_NAME))
            labels:
              type: router
          spec:
            containers:
            - env:
              - name: ESPENV_security_oauth2_client_id
                valueFrom:
                  secretKeyRef:
                    key: ESPENV_security_oauth2_client_id
                    name: esp-saslogon
              - name: ESPENV_security_oauth2_client_secret
                valueFrom:
                  secretKeyRef:
                    key: ESPENV_security_oauth2_client_secret
                    name: esp-saslogon
              - name: ESP_LICENSE
                valueFrom:
                  secretKeyRef:
                    key: SAS_LICENSE
                    name: sas-license
              envFrom:
              - secretRef:
                  name: sas-consul-client
              - configMapRef:
                  name: sas-shared-config
              image: sas-event-stream-processing-server-app
              imagePullPolicy: IfNotPresent
              name: ((ROUTER_NAME))
              readinessProbe:
                failureThreshold: 3
                httpGet:
                  path: /internal/ready
                  port: 31415
                  scheme: HTTP
              resources:
                limits:
                  cpu: "2"
                  memory: 2Gi
                requests:
                  cpu: "2"
                  memory: 2Gi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  add: []
                  drop:
                  - ALL
                privileged: false
                readOnlyRootFilesystem: true
              volumeMounts: []
            imagePullSecrets:
            - name: sas-image-pull-secrets
            initContainers: []
            podAntiAffinity:
              preferredDuringSchedulingIgnoredDuringExecution:
              - podAffinityTerm:
                  labelSelector:
                    matchExpressions:
                    - key: app.kubernetes.io/name
                      operator: In
                      values:
                      - sas-event-stream-processing-server-app
                  topologyKey: kubernetes.io/hostname
                weight: 100
            serviceAccountName: sas-esp-project
            tolerations:
            - effect: NoSchedule
              key: workload.sas.com/class
              operator: Equal
              value: compute
            volumes: []
